<!DOCTYPE html>
<html>
    <head>
        <title>ブラウン運動</title>
        <style>
            #canvas{
                width: 500px;
                height: 500px;
                background-color: #000000;
            }
        </style>
        <script>
            var n=1
            var r=20;
            var x=100;
            var y=100;
            var vx=8;
            var vy=4;
            var X=250;
            var Y=250;
            var R=50;

            var canvasElement;
            var context;
            window.addEventListener('load',function(){
                drawStart();
            })
            function drawStart(){
                canvasElement=document.getElementById('canvas');
                canvasElement.width=canvasElement.clientWidth;
                canvasElement.height=canvasElement.clientHeight;
                context=canvasElement.getContext('2d');


                loop();
            }
            function loop(){
                
                var width=canvasElement.width;
                var height=canvasElement.height;
                

                for(let i=0;i<1;i++){
                    x+=vx;
                   y+=vy;
                
                if(x<r || x>width-r){
                    vx=-vx;
                }
                if(y<r || y>height-r){
                    vy=-vy
                }
                
                L=(X-x)*(X-x)+(Y-y)*(Y-y)
                l=(R+r)*(R+r);

                if(l>L){
                    X+=vx/2;
                    Y+=vy/2
                    vx=-vx;
                    vy=-vy;
                    x+=vx;
                    y+=vy;
                    
                }
                
                
                context.clearRect(0,0,width,height);
                context.beginPath();
                context.arc(x,y,r,0,2*Math.PI,false);
                context.closePath();
                context.fillStyle="#888888";    
                context.fill();

                context.beginPath();
                context.arc(X,Y,R,0,2*Math.PI,false);
                context.closePath();
                context.fillStyle="#FFFFFF";    
                context.fill();

                
 

                }

                requestAnimationFrame(loop)
            }
        </script>

    </head>
    <body>
        <canvas id='canvas'></canvas>

    </body>
</html>